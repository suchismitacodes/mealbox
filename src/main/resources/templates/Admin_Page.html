<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Mealbox — Admin Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/Admin_Page.css}"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
</head>
<body>

<div class="admin-wrapper">

    <div class="admin-topbar">
        <h1><i class="fa-solid fa-gauge-high"></i> Admin Dashboard — MealBox</h1>
        <a th:href="@{/login}" class="btn-back"><i class="fa-solid fa-arrow-left"></i> Back</a>
    </div>

    <!-- ── Admins Table ── -->
    <section class="data-section">
        <h2>Admins</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Admin_Id</th>
                    <th>Admin_Name</th>
                    <th>Admin_Email</th>
                    <th>Admin_Number</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="admin : ${admins}">
                    <td th:text="${admin.adminId}"></td>
                    <td th:text="${admin.adminName}"></td>
                    <td th:text="${admin.adminEmail}"></td>
                    <td th:text="${admin.adminNumber}"></td>
                    <td class="actions">
                        <a th:href="@{/updateAdmin/{id}(id=${admin.adminId})}" class="btn-icon edit-icon" title="Edit">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </a>
                        <a th:href="@{/deleteAdmin/{id}(id=${admin.adminId})}" class="btn-icon delete-icon" title="Delete"
                           onclick="return confirm('Delete this admin?')">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="5">
                        <a th:href="@{/addAdmin}" class="btn-add"><i class="fa-solid fa-plus"></i> Add_Admin</a>
                    </td>
                </tr>
            </tfoot>
        </table>
    </section>

    <!-- ── Users Table ── -->
    <section class="data-section">
        <h2>Users</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>User_Id</th>
                    <th>User_Name</th>
                    <th>User_Email</th>
                    <th>User_Number</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="user : ${users}">
                    <td th:text="${user.u_id}"></td>
                    <td th:text="${user.uname}"></td>
                    <td th:text="${user.uemail}"></td>
                    <td th:text="${user.unumber}"></td>
                    <td class="actions">
                        <a th:href="@{/updateUser/{id}(id=${user.u_id})}" class="btn-icon edit-icon" title="Edit">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </a>
                        <a th:href="@{/deleteUser/{id}(id=${user.u_id})}" class="btn-icon delete-icon" title="Delete"
                           onclick="return confirm('Delete this user?')">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="5">
                        <a th:href="@{/addUser}" class="btn-add"><i class="fa-solid fa-plus"></i> Add_User</a>
                    </td>
                </tr>
            </tfoot>
        </table>
    </section>

    <!-- ── Products Table ── -->
    <section class="data-section">
        <h2>Products</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Price (₹)</th>
                    <th>Category</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="product : ${products}">
                    <td th:text="${product.pid}"></td>
                    <td th:text="${product.pname}"></td>
                    <td th:text="${product.pprice}"></td>
                    <td th:text="${product.category}"></td>
                    <td class="actions">
                        <a th:href="@{/updateProduct/{id}(id=${product.pid})}" class="btn-icon edit-icon" title="Edit">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </a>
                        <a th:href="@{/deleteProduct/{id}(id=${product.pid})}" class="btn-icon delete-icon" title="Delete"
                           onclick="return confirm('Delete this product?')">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="5">
                        <a th:href="@{/addProduct}" class="btn-add"><i class="fa-solid fa-plus"></i> Add_Product</a>
                    </td>
                </tr>
            </tfoot>
        </table>
    </section>

    <!-- ── Orders Table ── -->
    <section class="data-section">
        <h2>Orders</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>User_Name</th>
                    <th>User_Email</th>
                    <th>Product_Name</th>
                    <th>Product_Price (₹)</th>
                    <th>Product_Quantity</th>
                    <th>Total_Amount (₹)</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="order : ${orders}">
                    <td th:text="${order.user != null ? order.user.uname : 'N/A'}"></td>
                    <td th:text="${order.user != null ? order.user.uemail : 'N/A'}"></td>
                    <td th:text="${order.oName}"></td>
                    <td th:text="${order.oPrice}"></td>
                    <td th:text="${order.oQuantity}"></td>
                    <td th:text="${order.totalAmmout}"></td>
                    <td th:text="${order.orderDate}"></td>
                </tr>
            </tbody>
        </table>
    </section>

</div>

</body>
</html>
